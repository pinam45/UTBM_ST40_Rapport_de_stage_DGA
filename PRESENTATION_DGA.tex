%!TEX program = xelatex
\PassOptionsToPackage{table,svgnames}{xcolor}
\PassOptionsToPackage{french}{translator}
\documentclass[aspectratio=169,11pt]{beamer}

%----------------------------------------
% Packages
%----------------------------------------
%\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{translator}
\usepackage{lmodern}
\usepackage{hyperref}
\usepackage{xcolor}
\usepackage{listings}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{mathrsfs}
\usepackage{array}
\usepackage{tabularx}
\usepackage{multirow}
\usepackage[justification=centering]{caption}
\usepackage{float}
\usepackage{standalone}
\usepackage{import}
% PGF-TikZ
\usepackage{pgf}
\usepackage{tikz}
\usepackage{pgf-umlsd}
\usepackage{pgfgantt}
% Personnal packages
\usepackage{packages/MagicListings}
\usepackage{packages/StandardLibraryCDefinition}

%----------------------------------------
% Theme
%----------------------------------------

\usetheme{boxes}
\useoutertheme{infolines}
\usecolortheme{whale}%beaver
\usecolortheme{seagull}

% remove bottom line
\setbeamertemplate{footline}{}

% remove navigation symbols.
\beamertemplatenavigationsymbolsempty{}

%\setbeamercovered{transparent}

%----------------------------------------
% Informations
%----------------------------------------

\title{Retour de stage}
\subtitle{GenDbg et YaCo}
\author{Maxime Pinard}
\institute[UTBM]{Université de Technologie de Belfort Montbéliard}
\date{23 Janvier 2018}

%\keywords{}
\subject{Retour de stage: GenDbg et YaCo}
%\logo{\includegraphics[width=0.12\textwidth]{logos/DGA}}

%----------------------------------------
% Configurations
%----------------------------------------

\graphicspath{{figures/}}

\AtBeginSection
{
	\begin{frame}<beamer>
		\vfill{}
		\centering
		\begin{beamercolorbox}[sep=8pt,center]{title}
			\Huge\insertsectionhead\par%
		\end{beamercolorbox}
		\vfill{}
	\end{frame}
}

%----------------------------------------
% Listings configuration
%----------------------------------------

\input{GenDbgCDefinition}

%----------------------------------------
% Figures configuration
%----------------------------------------

\input{figures/figures_common}

%----------------------------------------
% Functions definitions
%----------------------------------------

\newcommand{\reg}[1]{\texttt{\$#1}}
\newcommand{\code}[1]{\texttt{#1}}

%----------------------------------------
% Document
%----------------------------------------
\begin{document}
	\begin{frame}
		\titlepage
	\end{frame}
	% \begin{frame}{Sommaire}
	% 	\tableofcontents
	% \end{frame}
	\begin{frame}
		\frametitle{Sujets}
		\begin{block}{GenDbg}
			Développement et fiabilisation d'un module de désassemblage MIPS
		\end{block}
		\vspace{1cm}
		\begin{block}{YaCo}
			Portage de Python vers C++ et amélioration de la gestion du repo et des évènements IDA
		\end{block}
	\end{frame}
	\section{GenDbg}
		\subsection{Présentation}
			\begin{frame}
				\frametitle{Concept}
				\begin{block}{Objectif}
					Permettre d'exécuter pas-à-pas tout type de programme, sur n'importe quelle architecture et système d'exploitation
				\end{block}
				\begin{block}{Solution}
					\begin{itemize}
						\item Un modèle framework / stub qui permet de séparer les composants débogués et la machine de l'analyste.
						\item Une architecture client serveur, composée d'un framework générique et de modules spécifiques
					\end{itemize}
				\end{block}
			\end{frame}
			\begin{frame}
				\frametitle{Utilisation}
				\centering\resizebox{\textwidth}{!}{\import{figures/}{GenDbg_architecture_minimale.tex}}
			\end{frame}
			\begin{frame}
				\frametitle{GUI Qt}
				\centering\resizebox{0.9\textwidth}{!}{\import{figures/}{uncover_GenDbg_GUI_Qt_Annotations.tex}}
			\end{frame}
			\begin{frame}
				\frametitle{GUI Qt: vue code}
				\centering\resizebox{0.7\textwidth}{!}{\import{figures/}{uncover_GenDbg_GUI_Qt_Vue_code_Annotations.tex}}
			\end{frame}
		\subsection{L'architecture de GenDbg}
			\begin{frame}
				\frametitle{Le framework modulaire}
				\centering\resizebox{0.7\textwidth}{!}{\import{figures/}{uncover_GenDbg_modules.tex}}
			\end{frame}
		\subsection{But du stage}
			\begin{frame}
				\frametitle{But du stage}
				\centering\resizebox{0.85\textwidth}{!}{\import{figures/}{uncover_GenDbg_modules_impl.tex}}
			\end{frame}
		\subsection{L'architecture MIPS}
			\begin{frame}
				\centering\includegraphics[width=\textwidth]{MIPS32_64_ASE_Modules}
			\end{frame}
			\begin{frame}
				\centering\includegraphics[width=0.55\textwidth]{MIPS_Architecture_Evolution}
				% 1985: MIPS I
				% 1999: MIPS32/64
				% 2012: R5
				% 2014: R6
			\end{frame}
			\begin{frame}
				\frametitle{MIPS32/64 Release 6}
				\centering\fbox{\includegraphics[width=0.9\textwidth]{MIPS_LWC2}}\\
				\centering\fbox{\includegraphics[width=0.9\textwidth]{MIPS_R6_BC}}
			\end{frame}
		\subsection{Développement du module}
			\begin{frame}
				\frametitle{API}
				\begin{center}
					\begin{minipage}{0.9\textwidth}
						\lstinputlisting[language={[gendbg]C}, style=magic_style, numbers=none]{code/GetAsmModuleInfo.c}
					\end{minipage}
				\end{center}
				\begin{itemize}
					\item version du module (2)
					\item architecture (MIPS)
					\item taille de cellule (8 bits)
					\item taille max d'une instruction (32 bits)
					\item type de données utilisées (byte, halfword, word, doubleword)
					\item groupes de registres (GPR32, GPR64, SPR32, \ldots)
					\item \ldots
					\item liste des callbacks du module
				\end{itemize}
			\end{frame}
			\begin{frame}
				\hspace{30pt}\resizebox{!}{110pt}{\lstinputlisting[language={[gendbg]C}, style=magic_style]{code/AsmModuleFnIdx_T.c}}
			\end{frame}
			\begin{frame}
				\frametitle{API}
				Différent types de fonctions:
				\begin{itemize}
					\item Init / Uninit
					\item Manipulation des informations au format spécifique
					\item Conversion du format spécifique à l'architecture vers texte et inversement
					\begin{itemize}
						\item Utilisation de Capstone et Keystone
					\end{itemize}
				\end{itemize}
			\end{frame}
			\begin{frame}
				\frametitle{Init / Uninit}
				\centering\resizebox{0.7\textwidth}{!}{\import{figures/}{GenDbg_diagramme_sequence_initialisation.tex}}
			\end{frame}
			\begin{frame}
				\frametitle{Manipulation d'informations}
				\centering\resizebox{\textwidth}{!}{\import{figures/}{uncover_slide_GenDbg_sequence_GetInstructionPointer.tex}}
			\end{frame}
			\begin{frame}
				\frametitle{Convertion en texte}
				\centering\resizebox{\textwidth}{!}{\import{figures/}{uncover_slide_GenDbg_sequence_AddressToTxt}}
			\end{frame}
			\begin{frame}
				\frametitle{Convertion en texte}
				\centering\resizebox{\textwidth}{!}{\import{figures/}{slide_GenDbg_sequence_TxtToAddress}}
			\end{frame}
\end{document}
