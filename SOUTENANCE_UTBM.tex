%!TEX program = xelatex
\PassOptionsToPackage{table,svgnames}{xcolor}
\PassOptionsToPackage{french}{translator}
%\documentclass[aspectratio=169,11pt]{beamer}
\documentclass[11pt]{beamer}

%----------------------------------------
% Packages
%----------------------------------------
%\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{translator}
\usepackage{lmodern}
\usepackage{hyperref}
\usepackage{xcolor}
\usepackage{listings}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{mathrsfs}
\usepackage{array}
\usepackage{tabularx}
\usepackage{multirow}
\usepackage[justification=centering]{caption}
\usepackage{float}
\usepackage{standalone}
\usepackage{import}
% PGF-TikZ
\usepackage{pgf}
\usepackage{tikz}
\usepackage{pgf-umlsd}
\usepackage{pgfgantt}
% Personnal packages
\usepackage{packages/MagicListings}
\usepackage{packages/StandardLibraryCDefinition}

%----------------------------------------
% Theme
%----------------------------------------

\usetheme[illustration=cover2]{utbm}

%----------------------------------------
% Informations
%----------------------------------------

\title{Développement et fiabilisation d'un module de désassemblage interne}
%\subtitle{Direction Générale de l'Armement}
\author{Maxime Pinard}
\institute[UTBM]{Université de Technologie de Belfort Montbéliard}
\date{1er mars 2018}

%\keywords{}
\subject{Développement et fiabilisation d'un module de désassemblage interne}
%\logo{\includegraphics[width=0.12\textwidth]{logos/DGA}}

%----------------------------------------
% Configurations
%----------------------------------------

\graphicspath{{figures/}}

\AtBeginSection
{
	\begin{frame}[plain]
		\utbmtitle{\insertsectionhead}
	\end{frame}
}

%----------------------------------------
% Listings configuration
%----------------------------------------

\input{GenDbgCDefinition}

%----------------------------------------
% Figures configuration
%----------------------------------------

\input{figures/figures_common}

%----------------------------------------
% Document
%----------------------------------------
\begin{document}
	\begin{frame}[plain,noframenumbering]
		\titlepage
	\end{frame}
	\begin{frame}{Sommaire}
		\tableofcontents
	\end{frame}
	\section{Présentation de l'entreprise}
		\begin{frame}
			\frametitle{Du Ministère des Armées à la DGA MI}
			\centering\resizebox{\textwidth}{!}{\import{figures/}{uncover_slide_Ministere_Defense_a_DGA_MI.tex}}
			%----------
			% MinArm: 265 000 personnes
			% DGA: 9 700 personnes
			%----------
			% Missions DGA:
			% - Équiper les forces armées
			% - Préparer l’avenir
			% - Promouvoir les exportations d’armement
		\end{frame}
		\begin{frame}
			\frametitle{La DGA MI}
			\centering\resizebox{\textwidth}{!}{\import{figures/}{Hierarchie_DGA_MI_a_VIM.tex}}
			% Ancien CELAR
			% Conception, expertise, essais, évaluation: systemes d'informations, informatique, communications, spacial
		\end{frame}
		\begin{frame}
			\frametitle{VIM/VSE}
			\begin{block}{Analyse dynamique}
				\begin{itemize}
					\item Gendbg
						\begin{itemize}
							\invisible{\item Développement et fiabilisation du module de désassemblage MIPS}
						\end{itemize}
				\end{itemize}
			\end{block}
			\pause
			\begin{block}{Analyse statique}
				\begin{itemize}
					\item IDA
						\begin{itemize}
							\item YaCo
								\begin{itemize}
									\invisible{\item Portage en C++ et amélioration de la gestion des évènements IDA et du dépôt Git}
								\end{itemize}
						\end{itemize}
				\end{itemize}
			\end{block}
		\end{frame}
	\section{Sujets du stage}
		\begin{frame}
			\frametitle{Sujets du stage}
			\begin{block}{Analyse dynamique}
				\begin{itemize}
					\item Gendbg
						\begin{itemize}
							\item[\alert{$\blacktriangleright$}]<2-> Développement et fiabilisation du module de désassemblage MIPS
						\end{itemize}
				\end{itemize}
			\end{block}
			\begin{block}{Analyse statique}
				\begin{itemize}
					\item IDA
						\begin{itemize}
							\item YaCo
								\begin{itemize}
									\item[\alert{$\blacktriangleright$}]<3-> Portage en C++ et amélioration de la gestion des évènements IDA et du dépôt Git
								\end{itemize}
						\end{itemize}
				\end{itemize}
			\end{block}
		\end{frame}
	\section{Travail réalisé}
		\begin{frame}
			\frametitle{Utilisation}
			\centering\resizebox{\textwidth}{!}{\import{figures/}{GenDbg_architecture_minimale.tex}}
		\end{frame}
		\begin{frame}
			\frametitle{GUI}
			\centering\resizebox{\textwidth}{!}{\import{figures/}{uncover_GenDbg_GUI_Qt_Annotations.tex}}
		\end{frame}
		\begin{frame}
			\frametitle{GUI: vue code}
			\centering\resizebox{\textwidth}{!}{\import{figures/}{uncover_GenDbg_GUI_Qt_Vue_code_Annotations.tex}}
		\end{frame}
		\begin{frame}
			\frametitle{Le framework modulaire}
			\centering\resizebox{\textwidth}{!}{\import{figures/}{uncover_GenDbg_modules.tex}}
		\end{frame}
		\begin{frame}
			\frametitle{But du stage}
			\centering\resizebox{\textwidth}{!}{\import{figures/}{uncover_GenDbg_modules_impl.tex}}
		\end{frame}
		\begin{frame}
			\frametitle{Assemblage désassemblage}
			\centering\resizebox{\textwidth}{!}{\import{figures/}{Capstone_Keystone_utilisation_basique.tex}}
		\end{frame}
	\section{Résultats}
		\begin{frame}
			\frametitle{Résultats}
			\begin{block}{Ancien module MIPS}
				\begin{itemize}
					\item 8 200 lignes
				\end{itemize}
			\end{block}
			\begin{block}{Nouveau module MIPS}
				\begin{itemize}
					\item 1 600 lignes pour le module
					\item 1 500 lignes pour les tests
				\end{itemize}
			\end{block}
			\uncover<2->{
				\begin{block}{Dépendances}
					\begin{itemize}
						\item \ 56 600 lignes pour Capstone
						\item 100 000 lignes pour Keystone
					\end{itemize}
				\end{block}
			}
		\end{frame}
	\section{Conclusion}
		\begin{frame}
			\frametitle{Conclusion}
			\begin{block}{Personnellement}
				\begin{itemize}
					\item Découverte de nouveaux métiers
					\item Expérience des contraintes de travail dans un contexte de très haute sécurité
				\end{itemize}
			\end{block}
			\begin{block}{Professionnellement}
				\begin{itemize}
					\item Travail sur des gros projets à durée de vie longue
					\item Acquisition de nouvelles compétences
				\end{itemize}
			\end{block}
		\end{frame}
		\begin{frame}[plain]
			\utbmclosingframe{Avez-vous des questions?}
		\end{frame}
	\section*{Informations supplémentaires}
		\begin{frame}
			\frametitle{Informations supplémentaires}
			\begin{itemize}
				\item Stage
					\begin{itemize}
						\item[\ref{planning}] Planning
					\end{itemize}
				\item GenDbg
					\begin{itemize}
						\item[\ref{architecturemips}] Architecture MIPS
						\item[\ref{moduleapi}] API
						\item[\ref{manipulationinformation}] Manipulation des informations
					\end{itemize}
				\item YaCo
					\begin{itemize}
						\item[\ref{presentationida}] Présentation d'IDA
						\item[\ref{concept}] Concept
						\item[\ref{fonctionnement}] Fonctionnement
						\item[\ref{butstage}] But du stage
					\end{itemize}
			\end{itemize}
		\end{frame}
		\subsection*{Stage}
			\begin{frame}\label{planning}
				\frametitle{Planning}
				\hspace*{-10pt}%
				\centering\resizebox{0.9\paperwidth}{!}{\import{figures/}{Planning.tex}}
			\end{frame}
		\subsection*{GenDbg}
			\begin{frame}\label{architecturemips}
				\frametitle{L'architecture MIPS}
				\centering\includegraphics[width=0.7\textwidth]{MIPS_Architecture_Evolution}
				% 1985: MIPS I
				% 1999: MIPS32/64
				% 2012: R5
				% 2014: R6
			\end{frame}
			\begin{frame}
				\frametitle{MIPS32/64 Release 6}
				\centering\fbox{\includegraphics[width=\textwidth]{MIPS_LWC2}}\\
				\centering\fbox{\includegraphics[width=\textwidth]{MIPS_R6_BC}}
			\end{frame}
			\begin{frame}\label{moduleapi}
				\frametitle{API du module}
				\lstinputlisting[language={[gendbg]C}, style=magic_style, numbers=none]{code/GetAsmModuleInfo.c}
				\begin{itemize}
					\item version du module (2)
					\item architecture (MIPS)
					\item taille de cellule (8 bits)
					\item taille max d'une instruction (32 bits)
					\item type de données utilisées (byte, halfword, word, doubleword)
					\item groupes de registres (GPR32, GPR64, SPR32, \ldots)
					\item \ldots
					\item liste des callbacks du module
				\end{itemize}
			\end{frame}
			\begin{frame}
				\hspace{30pt}\resizebox{!}{110pt}{\lstinputlisting[language={[gendbg]C}, style=magic_style]{code/AsmModuleFnIdx_T.c}}
			\end{frame}
			\begin{frame}
				\frametitle{API du module}
				Différent types de fonctions:
				\begin{itemize}
					\item Init / Uninit
					\item Manipulation des informations au format spécifique
					\item Conversion du format spécifique à l'architecture vers texte et inversement
					\begin{itemize}
						\item Utilisation de Capstone et Keystone
					\end{itemize}
				\end{itemize}
			\end{frame}
			\begin{frame}\label{manipulationinformation}
				\frametitle{Manipulation d'informations}
				\centering\resizebox{\textwidth}{!}{\import{figures/}{uncover_slide_GenDbg_sequence_GetInstructionPointer.tex}}
			\end{frame}
		\subsection*{YaCo}
			\begin{frame}\label{presentationida}
				\frametitle{Présentation d'IDA}
				\centering\includegraphics[width=\textwidth]{IDA7_Vue_texte}
			\end{frame}
			\begin{frame}
				\frametitle{Présentation d'IDA}
				\centering\includegraphics[width=\textwidth]{IDA7_Vue_graphe}
			\end{frame}
			\begin{frame}\label{concept}
				\frametitle{Concept}
				\centering\resizebox{\textwidth}{!}{\import{figures/}{uncover_YaCo_principe.tex}}
			\end{frame}
			\begin{frame}\label{fonctionnement}
				\frametitle{Fonctionnement}
				\centering\resizebox{\textwidth}{!}{\import{figures/}{uncover_slide_YaCo_fonctionnement.tex}}
			\end{frame}
			\begin{frame}\label{butstage}
				\frametitle{But du stage}
				Principaux éléments de YaCo:
				\begin{center}
					\begin{tabularx}{\textwidth}{Xp{120pt}}
						$\blacktriangleright$ Hooks             & Python \uncover<2->{\color{green}$\longrightarrow$ C++}\\
						$\blacktriangleright$ Model / Exporteur & C++\\
						$\blacktriangleright$ Repository        & Python \uncover<2->{\color{green}$\longrightarrow$ C++}\\
						$\blacktriangleright$ Yaco (glue)       & Python \uncover<2->{\color{green}$\longrightarrow$ C++}\\
					\end{tabularx}
				\end{center}
			\end{frame}
			\begin{frame}[plain]
				\utbmclosingframe{}
			\end{frame}
\end{document}
